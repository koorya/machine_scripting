<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>;&#xD;
CASE from_upcrcyc_to_init_state OF&#xD;
	0 :&#xD;
		if start_from_upcrcyc_to_init_handle = True then&#xD;
			status_message := 'initialisation';&#xD;
			liftmech.cmd := LIFT_CMD#stop;&#xD;
	 																	//|.          &#xD;
																		//|.  ///      &#xD;
																		//|. /// ----- Support&#xD;
																		//|.///     &#xD;
																		//|.          &#xD;
																		//|.          &#xD;
																		//|.  ///       &#xD;
																		//|. /// ----- Free&#xD;
																		//|.///     &#xD;
																		//|.          &#xD;
			start_from_upcrcyc_to_init_handle := false;&#xD;
			from_upcrcyc_to_init_state:=1;&#xD;
		end_if;&#xD;
		&#xD;
	1 : &#xD;
			Y3:=True; //режим пружины&#xD;
			Y6:=false; //верхний сжат&#xD;
			Y7:=false; //нижний разжат&#xD;
																		//|.          &#xD;
																		//|.\\\       &#xD;
																		//|. \\\ -----&#xD;
																		//|.  \\\     &#xD;
																		//|.          &#xD;
																		//|.          &#xD;
																		//|.\\\       &#xD;
																		//|. \\\ -----&#xD;
																		//|.  \\\     &#xD;
																		//|.          &#xD;
&#xD;
&#xD;
			Y1:=False;&#xD;
			Y2:=False;&#xD;
			status_message := 'switch bottom locks to up : \';&#xD;
&#xD;
			from_upcrcyc_to_init_state:=10;&#xD;
			&#xD;
	10:;&#xD;
		status_message := 'Waiting for bottom locks swithced from down to up : \----';&#xD;
&#xD;
		if ( not ( SQ1 or   SQ3 or    SQ9 or     SQ11 or    SQ17 or    SQ19 or   SQ25 or    SQ27 ) ) and&#xD;
		   (       ( SQ2 and SQ4 and SQ10 and SQ12 and SQ18 and SQ20 and SQ26 and SQ28 ) ) then;&#xD;
				&#xD;
				liftmech.cmd := LIFT_CMD#expand;&#xD;
				status_message := 'Expanding liftmech. Waiting for top locks relesed and swithced to up : \----';&#xD;
				&#xD;
				from_upcrcyc_to_init_state:=2;&#xD;
			end_if;&#xD;
	2:;&#xD;
		if (       ( SQ6 and SQ8 and SQ14 and SQ16 and SQ22 and SQ24 and SQ30 and SQ32 ) ) and &#xD;
	       ( not ( SQ5 or   SQ7 or    SQ13 or    SQ15 or   SQ21 or    SQ23 or    SQ29 or   SQ31 ) ) then;&#xD;
			&#xD;
			Y3:=True; //режим пружины&#xD;
			Y6:=false; //верхний сжат&#xD;
			Y7:=true; //нижний cзжат			&#xD;
																		//|.          &#xD;
																		//|.\\\       &#xD;
																		//|. \\\ -----&#xD;
																		//|.  \\\     &#xD;
																		//|.          &#xD;
																		//|.          &#xD;
																		//|.  ///     &#xD;
																		//|. /// -----&#xD;
																		//|.///     &#xD;
																		//|.          &#xD;
&#xD;
			liftmech.cmd := LIFT_CMD#stop;&#xD;
			status_message := 'Switch bottom lock to down :/----.';&#xD;
&#xD;
			from_upcrcyc_to_init_state:=21;&#xD;
		end_if;&#xD;
	21:;&#xD;
		if liftmech.state = LIFT_STATE#holding then ; &#xD;
			liftmech.cmd := LIFT_CMD#reduce;&#xD;
			from_upcrcyc_to_init_state:=3;&#xD;
			status_message := 'Reduceing liftmech. Waiting for reduce complete.';&#xD;
&#xD;
		end_if;&#xD;
			&#xD;
	3:;&#xD;
		if ( liftmech.state = LIFT_STATE#reduce_end) then ;  	&#xD;
			liftmech.cmd := LIFT_CMD#expand;&#xD;
			from_upcrcyc_to_init_state:=4;&#xD;
			status_message := 'Expanding liftmech. Waiting for reduce complete. Waiting for bottom locks :/----';&#xD;
&#xD;
		end_if;&#xD;
		&#xD;
		&#xD;
	4:;&#xD;
		from_upcrcyc_to_init_state:=5;&#xD;
&#xD;
	5:;&#xD;
		if (       ( SQ1 and SQ3 and SQ9 and SQ11 and SQ17 and SQ19 and SQ25 and SQ27 ) )  and // bottom locks :/----&#xD;
		   ( not ( SQ2 or   SQ4 or    SQ10 or  SQ12 or    SQ18 or   SQ20 or    SQ26 or   SQ28 ) ) then;&#xD;
		   &#xD;
			Y3:=True; //режим пружины&#xD;
			Y6:=false; //верхний сжат&#xD;
			Y7:=false; //нижний разжат&#xD;
																		//|.          &#xD;
																		//|.\\\       &#xD;
																		//|. \\\ -----&#xD;
																		//|.  \\\     &#xD;
																		//|.          &#xD;
																		//|.          &#xD;
																		//|.\\\       &#xD;
																		//|. \\\ -----&#xD;
																		//|.  \\\     &#xD;
																		//|.          			&#xD;
			liftmech.cmd := LIFT_CMD#stop;&#xD;
			&#xD;
			status_message := 'Switched bottom locks :\----';&#xD;
&#xD;
			from_upcrcyc_to_init_state:=51;&#xD;
		end_if;&#xD;
	51:;&#xD;
		if liftmech.state = LIFT_STATE#holding then ; &#xD;
			liftmech.cmd := LIFT_CMD#reduce;&#xD;
			from_upcrcyc_to_init_state:=6;&#xD;
			status_message := 'Reduceing, waiteng for complete.';&#xD;
&#xD;
	end_if;&#xD;
		&#xD;
	6:;&#xD;
		if (liftmech.state = LIFT_STATE#reduce_end) then ;  	&#xD;
				Y3:=false; //режим пружины отменить&#xD;
				liftmech.cmd := LIFT_CMD#stop;&#xD;
				status_message := 'Cycle complete.';&#xD;
				from_upcrcyc_to_init_state:=99;&#xD;
		end_if;&#xD;
	99 :; // Processing after normal end&#xD;
	  //up_frame_cycle_state:=INT#0; &#xD;
	98 :; // Processing after error end.&#xD;
		//&#xD;
END_CASE;</Text></StructuredTextModel>