<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>;&#xD;
;&#xD;
&#xD;
;&#xD;
CASE from_hold_to_lift_crab_state OF&#xD;
	0 : &#xD;
		if start_from_hold_to_lift_crab_handle = True then&#xD;
			status_message := 'initialization';&#xD;
			Y3:=True; //режим пружины&#xD;
			Y6:=false; //верхний сжат&#xD;
			Y7:=true; //нижний сжат&#xD;
			&#xD;
			liftmech.cmd := LIFT_CMD#stop;&#xD;
			start_from_hold_to_lift_crab_handle := false;&#xD;
			from_hold_to_lift_crab_state:=1;&#xD;
		end_if;&#xD;
		&#xD;
	1 : //Подъем верхнего замка на 80 мм&#xD;
			Y1:=False;&#xD;
			Y2:=False;&#xD;
			liftmech.cmd := LIFT_CMD#reduce;&#xD;
			from_hold_to_lift_crab_state:=2;&#xD;
	2:;&#xD;
		if (liftmech.state = LIFT_STATE#reduce_end) then ;  	 &#xD;
&#xD;
			Y3:=True; //режим пружины&#xD;
			Y6:=true; //верхний расжат&#xD;
			Y7:=true; //нижний сжат&#xD;
			&#xD;
			liftmech.cmd := LIFT_CMD#expand;&#xD;
&#xD;
			from_hold_to_lift_crab_state:=3;&#xD;
		else&#xD;
			status_message := 'Waiting for lift mech reduce complete';&#xD;
		end_if;&#xD;
		&#xD;
	3:;&#xD;
	&#xD;
		if (liftmech.min_dist&gt;=920) &#xD;
			//and (SQ_DW=16#55555555 ) &#xD;
			then ;  	&#xD;
			&#xD;
			Y3:=True; //режим пружины&#xD;
			Y6:=true; //верхний расжат&#xD;
			Y7:=true; //нижний сжат&#xD;
			liftmech.cmd := LIFT_CMD#stop;&#xD;
			&#xD;
			from_hold_to_lift_crab_state:=31;&#xD;
		else&#xD;
			status_message := 'Waiting for lift mech expand up to 920 mm';&#xD;
		end_if;&#xD;
		&#xD;
	31:;&#xD;
		if (liftmech.state = LIFT_STATE#holding) then ;&#xD;
			liftmech.cmd := LIFT_CMD#reduce;&#xD;
			from_hold_to_lift_crab_state:=4;&#xD;
		end_if;&#xD;
&#xD;
	4:;&#xD;
		if (liftmech.state = LIFT_STATE#reduce_end) then ;  	 &#xD;
			Y3:=false; //режим пружины отменить&#xD;
			Y6:=true; //верхний расжат&#xD;
			Y7:=true; //нижний сжат&#xD;
			&#xD;
			liftmech.cmd := LIFT_CMD#stop;&#xD;
&#xD;
			status_message := 'Cycle complete';&#xD;
			from_hold_to_lift_crab_state:=99;&#xD;
		else&#xD;
			status_message := 'Waiting for lift mech reduce complete';&#xD;
		end_if;	&#xD;
	&#xD;
	99 :; // Processing after normal end&#xD;
	  //up_frame_cycle_state:=INT#0;&#xD;
	98 :; // Processing after error end.&#xD;
		//&#xD;
END_CASE;</Text></StructuredTextModel>